
<!DOCTYPE html>

<html lang="zh_CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>OpenVINO™ API 2.0 迁移指南 &#8212; OpenVINO  文档</title>
    
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/blank.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <link rel="stylesheet" type="text/css" href="../_static/doxyrest-pygments.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <link href="../_static/css/media/favicon.ico" rel="shortcut icon">
    <link rel="stylesheet" href="../_static/css/openvino_sphinx_theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/button.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/input.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/textfield.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/tabs.css" type="text/css" />
    <script src="../_static/js/openvino_sphinx_theme.js"></script>
    <link rel="stylesheet" href="../_static/css/viewer.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-annotation/0.5.7/chartjs-plugin-annotation.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-barchart-background@1.3.0/build/Plugin.Barchart.Background.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-deferred@1"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.1/papaparse.min.js"></script>
    <script src="../_static/js/viewer.min.js"></script>
    <script src="/assets/versions_raw.js"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/tabs.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/translations.js"></script>
    <script src="../_static/target-highlight.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="OpenVINO™ 训练扩展" href="OTE_landing_page.html" />
    <link rel="prev" title="获得性能数据" href="Getting_performance_numbers.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="zh_CN">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
      <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="../index.html">
<p class="title">OpenVINO</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="index.html">
  OpenVINO
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
</ul>
      </div>
      
      <div class="navbar-end-item">
        
<div class="dropdown sst-dropdown sst-dropdown-navbar">
  <button class="btn sst-btn dropdown-toggle" type="button" id="version-selector" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button>
  <div class="dropdown-menu" aria-labelledby="version-selector">
  </div>
</div>
      </div>
      
      <div class="navbar-end-item">
        

      </div>
      
    </div>
  </div>
</div>
        <div id="collapse-nav-wrapper" class="container-xl">
          <button id="collapse-nav" class="button bttn-prm button-size-m" type="button" data-toggle="collapse" data-target="#nav-tree" aria-expanded="false" aria-controls="nav-tree">
            Documentation navigation <i class="fas fa-chevron-down"></i>
          </button>
        </div>
      </nav>
      <div class="transition-banner container-fluid alert alert-info alert-dismissible fade show" role="alert">
        <p>OpenVINO 2022.1 introduces a new version of OpenVINO API (API 2.0). For more information on the changes and transition steps, see the <a href="https://docs.openvino.ai/latest/openvino_2_0_transition_guide.html">transition guide</a></p>
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
    </div>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar" id="nav-tree"><form class="searchForm bd-search d-flex align-items-center" action="../search.html" method="get">
    <i class="icon fas fa-search"></i>
    <input type="search" class="form-control" name="query" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="CPU.html">
   CPU 设备
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Convert_Model_From_Paddle.html">
   转换 PadlePaddle 模型
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="Deep_Learning_Model_Optimizer_DevGuide.html">
   模型优化器用法
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="simple">
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="Device_Plugins.html">
   推理设备支持
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="simple">
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="GPU.html">
   GPU 设备
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="simple">
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Getting_performance_numbers.html">
   获得性能数据
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="current reference internal" href="#">
   OpenVINO™ API 2.0 迁移指南
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="simple">
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="OTE_landing_page.html">
   OpenVINO™ 训练扩展
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="README.html">
   模型下载程序和其他自动化工具
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="common_inference_pipeline.html">
   推理管道
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="configure_devices.html">
   配置设备
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="deployment_guide_introduction.html">
   OpenVINO™ 部署简介
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="deployment_intro.html">
   使用 OpenVINO™ 部署应用
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="simple">
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="deployment_migration.html">
   安装和部署
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="dl_workbench_overview.html">
   OpenVINO™ 深度学习工作台概述
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="simple">
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="dldt_deployment_optimization_guide.html">
   运行时推理优化
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="simple">
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="dldt_optimization_guide.html">
   性能优化简介虽然推理性能应定义为许多因素（包括精度和效率）的组合，但多数情况下会将其描述为执行速度。作为模型处理实时数据的速率，从根本上说，它基于两个相互关联的指标：延迟和吞吐量。
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="dlstreamer.html">
   英特尔® Deep Learning Streamer（英特尔® DL Streamer）
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="gapi_intro.html">
   OpenCV Graph API (G-API) 简介
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="simple">
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="graph_construction.html">
   在 OpenVINO™ 运行时创建模型
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="home.html">
   OpenVINO™ 模型服务器
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="simple">
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="introduction.html">
   OpenVINO™ 安全性简介
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="model_introduction.html">
   模型处理简介
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="model_optimization_guide.html">
   模型优化指南
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
  <label for="toctree-checkbox-10">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="simple">
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="openvino_ecosystem.html">
   OpenVINO™ 生态系统概述
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="openvino_ecosystem_ovtf.html">
   OpenVINO™ 与 TensorFlow 集成
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="openvino_intro.html">
   利用 OpenVINO™ 运行时展开推理
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
  <label for="toctree-checkbox-11">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="simple">
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="ov_dynamic_shapes.html">
   动态形状
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
  <label for="toctree-checkbox-12">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="simple">
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="ov_transformations.html">
   转换 API 概述
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
  <label for="toctree-checkbox-13">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="simple">
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="ovsa_get_started.html">
   OpenVINO™ 安全附加组件
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="performance_benchmarks.html">
   性能基准测试
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
  <label for="toctree-checkbox-14">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="simple">
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="performance_hints.html">
   高级别性能提示
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="preprocessing.html">
   预处理
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="protecting_model_guide.html">
   结合使用加密模型和 OpenVINO
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="supported_model_formats.html">
   支持的模型格式
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/>
  <label for="toctree-checkbox-15">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="simple">
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="workbench.html">
   深度学习工作台安全性
  </a>
 </li>
</ul>

  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#api-2-0">
   API 2.0 简介
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#openvino-ir-v11">
   全新 OpenVINO™ IR v11
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#openvino-ir-v10">
   向后兼容 OpenVINO™ IR v10
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#a-name-differences-api20-ie-a-api-2-0-api">
   <a name="differences-api20-ie">
   </a>
   API 2.0 与推理引擎 API 的行为差异
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id1">
   更多信息
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                <div class="tocsection download-docs">
  <div class="dropdown sst-dropdown">
    <button class="button bttn-prm button-size-m" data-display="static" type="button" id="download-options"
      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      Download Docs
    </button>
    <div class="dropdown-menu" aria-labelledby="download-options">
      <a class="dropdown-item" href="#" onclick="window.print()">.pdf</a>
      <a id="download-zip-btn" class="dropdown-item" href="#">.zip</a>
    </div>
  </div>
</div>
              </div>
              
            
          </div>
          

          
          
              
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
            
                <div>
                  
  <section id="openvino-api-2-0">
<h1>OpenVINO™ API 2.0 迁移指南<a class="headerlink" href="#openvino-api-2-0" title="永久链接至标题">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<p>本指南介绍了全新的 OpenVINO™ API (API 2.0) 以及新型 OpenVINO™ IR 模型格式：IR v11。您将在下文中找到其新旧版本的比较。</p>
<section id="api-2-0">
<h2>API 2.0 简介<a class="headerlink" href="#api-2-0" title="永久链接至标题">¶</a></h2>
<p>从 TensorFlow、ONNX 运行时、PyTorch、PaddlePaddle 等其他框架迁移应用时，2022.1 之前的 OpenVINO™ 版本需要更改应用逻辑。之所以需要做出更改，是因为：</p>
<ul class="simple">
<li><p>模型优化器更改了某些输入的输入精度。例如，具有 <code class="docutils literal notranslate"><span class="pre">I64</span></code> 输入的神经语言处理模型已更改为包含 <code class="docutils literal notranslate"><span class="pre">I32</span></code> 输入。</p></li>
<li><p>模型优化器更改了 TensorFlow 模型的布局（请参阅 <span class="xref myst">OpenVINO™ 中的布局</span>）。因此在使用布局不同于框架布局的输入数据时有特殊要求：
<img alt="tf_openvino" src="../_images/tf_openvino.png" /></p></li>
<li><p>由于设备插件的限制，推理引擎 API (<code class="docutils literal notranslate"><span class="pre">InferenceEngine::CNNNetwork</span></code>) 应用了一些输入和输出精度的转换规则。</p></li>
<li><p>在模型优化器中进行模型转换期间，用户需要指定输入形状，并在应用中使用静态形状。</p></li>
</ul>
<p>像在原始框架中一样，OpenVINO™ 2022.1 引入了 API 2.0（也称为 OpenVINO™ API v2）来调整使用模型的逻辑 - 未更改布局和精度，使用张量名称和索引来执行操作以对输入和输出进行寻址。OpenVINO™ 运行时将用于推理的推理引擎 API 与用于处理模型和操作的 nGraph API 结合在一起。API 2.0 有通用的结构、命名约定样式、命名空间，并移除了重复的结构。有关更多详细信息，请参阅 <a class="reference internal" href="common_inference_pipeline.html"><span class="doc std std-doc">OpenVINO™ API v2 对推理管道的更改</span></a>。</p>
<blockquote>
<div><p><strong>注意</strong>：您现有的应用将继续正常使用 OpenVINO™ 运行时 2022.1。尽管如此，仍强烈建议迁移到 API 2.0。这便于您使用其他功能，如<span class="xref myst">预处理</span>和<span class="xref myst">动态形状支持</span>。</p>
</div></blockquote>
</section>
<section id="openvino-ir-v11">
<h2>全新 OpenVINO™ IR v11<a class="headerlink" href="#openvino-ir-v11" title="永久链接至标题">¶</a></h2>
<p>为了支持这些功能，OpenVINO™ 引入了 OpenVINO™ IR v11，它现在是默认版本的模型优化器。以 OpenVINO™ IR v11 表示的模型的输入和输出与原始框架格式下的原始模型完全匹配。此外，无需在转换过程中指定输入形状。因此生成的 OpenVINO™ IR v11 包含 <code class="docutils literal notranslate"><span class="pre">-1</span></code>，用于表示未定义维度。有关如何充分利用此功能的更多详细信息，请参阅<span class="xref myst">使用动态形状</span>。有关如何在应用中将形状调整为静态形状的信息，请参阅<span class="xref myst">更改输入形状</span>。</p>
<p>OpenVINO™ IR v11 完全兼容借助旧版 OpenVINO™ 使用的推理引擎 API 编写的应用。这种向后兼容性归功于 OpenVINO™ IR v11 中包含的其他运行时信息。这意味着，如果基于推理引擎的应用读取 OpenVINO™ IR v11，会在内部将其转换为 OpenVINO™ IR v10。</p>
<p>所有 OpenVINO™ 开发工具均支持 OpenVINO™ IR v11，包括训练后优化工具、基准测试应用等。</p>
</section>
<section id="openvino-ir-v10">
<h2>向后兼容 OpenVINO™ IR v10<a class="headerlink" href="#openvino-ir-v10" title="永久链接至标题">¶</a></h2>
<p>API 2.0 还支持向后兼容 OpenVINO™ IR v10 模型。如果您拥有 OpenVINO™ IR v10 文件，也可以将其馈送到 OpenVINO™ 运行时。有关更多详细信息，请参阅<a class="reference internal" href="common_inference_pipeline.html"><span class="doc std std-doc">迁移步骤</span></a>。</p>
<p>某些 OpenVINO™ 开发工具也支持将 OpenVINO™ IR v10 和 v11 作为输入：</p>
<ul class="simple">
<li><p>默认情况下，精度检查器使用 API 2.0 来测量模型精度。它还支持通过使用 <code class="docutils literal notranslate"><span class="pre">--use_new_api</span> <span class="pre">False</span></code> 命令行参数切换到旧版 API。这两个启动程序都与 OpenVINO™ IR v10 和 v11 兼容，但在某些情况下应更新配置文件。有关更多详细信息，请参阅<a class="reference external" href="https://github.com/openvinotoolkit/open_model_zoo/blob/master/tools/accuracy_checker/openvino/tools/accuracy_checker/launcher/openvino_launcher_readme.md">精度检查器文档</a>。</p></li>
<li><p>默认情况下，<span class="xref myst">编译工具</span>编译要在 API 2.0 中使用的模型。要在推理引擎 API 下使用生成的已编译 Blob，应传递附加 <code class="docutils literal notranslate"><span class="pre">ov_api_1_0</span></code> 选项。</p></li>
</ul>
<p>但是，OpenVINO™ 2022.1 的训练后优化工具和深度学习工作台不支持 OpenVINO™ IR v10。它们需要最新版本的模型优化器才能生成 OpenVINO™ IR v11 文件。</p>
<blockquote>
<div><p><strong>注意</strong>：要量化 OpenVINO™ IR v10 模型以在 OpenVINO™ 2022.1 中运行，请下载并使用 OpenVINO™ 2021.4 的训练后优化工具。</p>
</div></blockquote>
</section>
<section id="a-name-differences-api20-ie-a-api-2-0-api">
<h2><a name="differences-api20-ie"></a>API 2.0 与推理引擎 API 的行为差异<a class="headerlink" href="#a-name-differences-api20-ie-a-api-2-0-api" title="永久链接至标题">¶</a></h2>
<p>推理引擎和 nGraph API 不会因引入了新 API 而被弃用，用户仍可以在应用中使用这些 API。但是，仍强烈建议迁移到 API 2.0，因为它提供了更多功能（在未来版本中会进一步扩展），例如：</p>
<ul class="simple">
<li><p><span class="xref myst">使用动态形状</span>，这会在使用神经语言处理 (NLP) 和超分辨率模型等兼容模型时提高性能。</p></li>
<li><p><span class="xref myst">预处理模型</span>，这会在推理模型中添加预处理操作并完全占用加速器，从而释放 CPU 资源。</p></li>
</ul>
<p>要了解推理引擎 API 与 API 2.0 之间的差异，请先查阅这两类行为的定义：</p>
<ul class="simple">
<li><p>OpenVINO™ 的<strong>旧行为</strong>假定：</p>
<ul>
<li><p>模型优化器可以更改原始框架中模型的输入元素类型和维度顺序（布局）。</p></li>
<li><p>推理引擎可以覆盖输入和输出元素类型。</p></li>
<li><p>推理引擎 API 使用操作名称对输入和输出进行寻址（例如，InferenceEngine::InferRequest::GetBlob）。</p></li>
<li><p>推理引擎 API 不支持具有动态输入形状的模型的编译。</p></li>
</ul>
</li>
<li><p>在 2022.1 中实现的<strong>新行为</strong>假定模型与框架完全一致：</p>
<ul>
<li><p>模型优化器保留输入元素类型和维度顺序（布局），并存储原始模型中的张量名称。</p></li>
<li><p>OpenVINO™ 运行时 2022.1 会读取任何格式（OpenVINO™ IR v10、OpenVINO™ IR v11、ONNX、PaddlePaddle 等）的模型。</p></li>
<li><p>API 2.0 使用张量名称进行寻址，这是兼容的模型框架采用的标准方法。</p></li>
<li><p>API 2.0 还可以通过索引对输入和输出张量进行寻址。一些模型格式（如 ONNX）对 OpenVINO 2022.1 保留的输入和输出顺序很敏感。</p></li>
</ul>
</li>
</ul>
<p>下表说明了基于这两个 API 的模型会使用哪种行为：<strong>旧</strong>行为还是<strong>新</strong>行为。</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>API</p></th>
<th class="head"><p>OpenVINO™ IR v10</p></th>
<th class="head"><p>OpenVINO™ IR v11</p></th>
<th class="head"><p>ONNX 文件</p></th>
<th class="head"><p>使用代码创建的模型</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>推理引擎/nGraph API</p></td>
<td><p>旧</p></td>
<td><p>旧</p></td>
<td><p>旧</p></td>
<td><p>旧</p></td>
</tr>
<tr class="row-odd"><td><p>API 2.0</p></td>
<td><p>旧</p></td>
<td><p>新</p></td>
<td><p>新</p></td>
<td><p>新</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id1">
<h2>更多信息<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h2>
<p>请参阅下文了解如何将基于推理引擎的应用迁移到 API 2.0：</p>
<ul class="simple">
<li><p><a class="reference internal" href="deployment_migration.html"><span class="doc std std-doc">安装和部署</span></a></p></li>
<li><p><a class="reference internal" href="common_inference_pipeline.html"><span class="doc std std-doc">OpenVINO™ 通用推理管道</span></a></p></li>
<li><p><a class="reference internal" href="preprocessing.html"><span class="doc std std-doc">对模型进行预处理</span></a></p></li>
<li><p><a class="reference internal" href="configure_devices.html"><span class="doc std std-doc">配置设备</span></a></p></li>
<li><p><a class="reference internal" href="graph_construction.html"><span class="doc std std-doc">OpenVINO™ 模型创建</span></a></p></li>
</ul>
</section>
</section>


                </div>
            
            
                <div class='prev-next-bottom'>
                  
    <a class='button bttn-sec button-size-l' id="prev-link" href="Getting_performance_numbers.html" title="previous page">Prev</a>
    <a class='button bttn-sec button-size-l' id="next-link" href="OTE_landing_page.html" title="next page">Next</a>

                </div>
            
          </main>
          

      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022, Various.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.2.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>